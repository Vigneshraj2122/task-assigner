<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Dashboard | Teacher Task Scheduler</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body class="dashboard-body">

    <!-- Navbar -->
    <nav class="navbar">
        <div class="logo">
            <i class="fas fa-calendar-check"></i>
            <span>TeacherScheduler</span>
        </div>
        <nav style="display: flex; gap: 1.5rem; margin-left: 2rem;">
            <a href="dashboard.html" style="text-decoration: none; color: var(--primary); font-weight: 600;">Home</a>
            <a href="timetable.html" style="text-decoration: none; color: var(--text-secondary, #666);">Timetable</a>
        </nav>
        <div class="user-info">
            <div id="greeting" class="greeting" style="margin-right: 15px; font-weight: 600; color: var(--primary);">
            </div>
            <span id="welcomeMsg" style="display: none;">Welcome, Teacher</span>
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme" style="width: auto; padding: 8px 12px; margin-right: 10px;">
                <i class="fas fa-moon"></i>
            </button>
            <button class="secondary" onclick="logout()" style="width: auto; padding: 8px 16px;">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">

        <!-- Add Task Section -->
        <div class="add-task-card card">
            <h2><i class="fas fa-plus-circle"></i> Add New Task</h2>
            <form id="addTaskForm">
                <label>Task Title</label>
                <input type="text" id="taskTitle" placeholder="e.g. Grade 10 Math Papers" required>

                <label>Description</label>
                <textarea id="taskDesc" placeholder="Details..." rows="3"></textarea>

                <label>Date</label>
                <input type="date" id="taskDate" required>

                <label>Time</label>
                <input type="time" id="taskTime" required>

                <button type="submit" style="margin-top: 10px;">
                    <i class="fas fa-save"></i> Save Task
                </button>
            </form>
        </div>

        <!-- Task List Section -->
        <div>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h2><i class="fas fa-list-ul"></i> Your Tasks</h2>
                <div id="clock" style="font-weight: 600; color: var(--primary);">00:00:00</div>
            </div>

            <!-- Next Class Alert Banner -->
            <div id="nextClassAlert" class="card"
                style="background: var(--primary); color: white; display: none; align-items: center; justify-content: space-between; margin-bottom: 1.5rem; border: none;">
                <div>
                    <h3 style="margin: 0; font-size: 0.8rem; opacity: 0.9; text-transform: uppercase;">Next Scheduled
                        Class</h3>
                    <p id="nextClassText" style="margin: 5px 0 0 0; font-size: 1.2rem; font-weight: 700;">Loading...</p>
                </div>
                <i class="fas fa-arrow-right fa-lg"></i>
            </div>

            <div id="taskList" class="task-list">
                <!-- Tasks will be injected here -->
                <div style="text-align: center; color: var(--text-muted, #888); padding: 2rem;">Loading tasks...</div>
            </div>

            <!-- New Timetable Section -->
            <div class="card" style="margin-top: 2rem; border-top: 4px solid var(--secondary);">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <h2><i class="fas fa-table"></i> Today's Timetable</h2>
                    <button class="secondary" onclick="printTimetable()"
                        style="width:auto; padding: 5px 15px; font-size:0.9rem;">
                        <i class="fas fa-print"></i> Print
                    </button>
                </div>
                <div class="timetable-container">
                    <table class="timetable">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Activity / Task</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="timetableBody">
                            <!-- Injected via JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>

    <audio id="notifySound" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"
        preload="auto"></audio>
    <audio id="successSound" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3"
        preload="auto"></audio>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/greetings.js"></script>
    <script src="js/greetings-simple.js"></script>
    <script src="js/app.js"></script>
</body>

</html>