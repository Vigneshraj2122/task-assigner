<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar | Task Scheduler</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body class="dashboard-body">

    <!-- Navbar -->
    <nav class="navbar">
        <div class="logo">
            <i class="fas fa-calendar-check"></i>
            <span>Task Scheduler</span>
        </div>
        <nav style="display: flex; gap: 1.5rem; margin-left: 2rem;">
            <a href="dashboard.html" style="text-decoration: none; color: var(--text-secondary, #666);">Home</a>
            <a href="calendar.html"
                style="text-decoration: none; color: var(--primary-solid); font-weight: 800;">Calendar</a>
            <a href="timetable.html" style="text-decoration: none; color: var(--text-secondary, #666);">Timetable</a>
        </nav>
        <div class="user-info">
            <div id="roleBadge"
                style="background: var(--secondary); color: white; padding: 2px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; margin-right: 10px;">
                User</div>
            <div id="greeting" class="greeting"
                style="margin-right: 15px; font-weight: 600; color: var(--primary-solid);">
            </div>
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme"
                style="width: auto; padding: 8px 12px; margin-right: 10px;">
                <i class="fas fa-moon"></i>
            </button>
            <button class="secondary" onclick="logout()" style="width: auto; padding: 8px 16px;">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container" style="grid-template-columns: 1fr;">
        <div class="card">
            <div class="calendar-controls">
                <h2 id="calendarMonthYear"><i class="fas fa-calendar-alt"></i> Loading...</h2>
                <div style="display:flex; gap: 10px; align-items:center;">
                    <div id="teacherControls" style="display:none; margin-right: 15px;">
                        <button class="secondary" onclick="openHolidayModal()"
                            style="width:auto; border-color: var(--secondary-solid); color: var(--secondary-solid);"><i
                                class="fas fa-umbrella-beach"></i> Add Holiday</button>
                    </div>
                    <button class="secondary" onclick="prevMonth()" style="width:auto;"><i
                            class="fas fa-chevron-left"></i></button>
                    <button class="secondary" onclick="nextMonth()" style="width:auto;"><i
                            class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <div class="calendar-grid" id="calendarGrid">
                <!-- Header -->
                <div class="calendar-header-day">Sun</div>
                <div class="calendar-header-day">Mon</div>
                <div class="calendar-header-day">Tue</div>
                <div class="calendar-header-day">Wed</div>
                <div class="calendar-header-day">Thu</div>
                <div class="calendar-header-day">Fri</div>
                <div class="calendar-header-day">Sat</div>
                <!-- Days will be injected here -->
            </div>
        </div>
    </div>

    
    <div id="holidayModal" class="card" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); z-index:2000; width:400px; background:var(--bg-card); backdrop-filter:blur(20px);">
        <h3><i class="fas fa-umbrella-beach"></i> Add Holiday</h3>
        <label>Holiday Name</label>
        <input type="text" id="holidayName" placeholder="e.g. Summer Break">
        <label>Date</label>
        <input type="date" id="holidayDate">
        <div style="display:flex; gap:10px; margin-top:20px;">
            <button onclick="saveHoliday()">Save</button>
            <button class="secondary" onclick="closeHolidayModal()">Cancel</button>
        </div>
    </div>
    <div id="modalOverlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1999;" onclick="closeHolidayModal()"></div>
<script src="js/theme.js"></script>
    <script src="js/calendar.js"></script>
    <script>
        // Use standard logout from app.js logic if needed, or define here
        function logout() {
            localStorage.removeItem('user');
            localStorage.removeItem('token');
            window.location.href = 'index.html';
        }
    </script>
</body>

</html>
